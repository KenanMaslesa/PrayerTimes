var positionFromStorage=localStorage.getItem("currentPosition"),currentPosition,latitude=localStorage.getItem("latitude"),longitude=localStorage.getItem("longitude"),method=localStorage.getItem("method"),cityID=localStorage.getItem("cityID"),isAthanAllowed=localStorage.getItem("isAthanAllowed"),isNotificationAllowed=localStorage.getItem("isNotificationAllowed"),isDayNightMode=localStorage.getItem("isDayNightMode"),isDay=localStorage.getItem("isDay"),notificationMinutes=localStorage.getItem("notificationMinutes"),themeColor=localStorage.getItem("themeColor"),bigDataCloud1="d901232290c147beacf55aebb5bf7724",bigDataCloud2="a711a9c049714f5a935fddd5ed0f2ae6",currentTime,urlGetPrayerTimes,urlGetCity,urlCalendar,timeZone,fajr,sunrise,dhuhr,asr,maghrib,isha,currentDateTime,countDownTime,gregorianDate,hijriDate,country,county,flag=!0,month,year,tempMonth=(new Date).getMonth()+1,tempYear=(new Date).getFullYear(),calendarFlag=!1;const monthNames=["","January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesBosnian=["","Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"];function Settings(){null==notificationMinutes&&(localStorage.setItem("notificationMinutes",10),notificationMinutes=10),null==isAthanAllowed&&(localStorage.setItem("isAthanAllowed",!1),isAthanAllowed=!1),null==isNotificationAllowed&&(localStorage.setItem("isNotificationAllowed",!0),isNotificationAllowed=!0),null==isDayNightMode&&(localStorage.setItem("isDayNightMode",!0),isDayNightMode=!0),$(".athan .toggle-btn").addClass("true"==isAthanAllowed||1==isAthanAllowed?"active":""),$(".notification .toggle-btn").addClass("true"==isNotificationAllowed||1==isNotificationAllowed?"active":""),$(".day-night-mode .toggle-btn").addClass("true"==isDayNightMode||1==isDayNightMode?"active":""),"true"!=isNotificationAllowed&&1!=isNotificationAllowed||$(".range-slider").slideDown(),"false"==isDayNightMode&&$(".theme-color-wrapper").slideDown(),$(".range-slider output").html(notificationMinutes),$(".range-slider input[type=range]").val(notificationMinutes)}function successLocation(position){currentPosition=position,latitude=position.coords.latitude,longitude=position.coords.longitude,localStorage.setItem("latitude",latitude),localStorage.setItem("longitude",longitude),setupMap([longitude,latitude]),showPosition(method)}function errorLocation(){getRequest(IPLocation,"https://geolocation-db.com/json/")}function IPLocation(location){latitude=location.latitude,longitude=location.longitude,localStorage.setItem("latitude",latitude),localStorage.setItem("longitude",longitude),setupMap([longitude,latitude]),showPosition(method)}function getRequest(funk,url){var request=new XMLHttpRequest;request.onload=function(){200==request.status?funk(JSON.parse(request.responseText)):console.log(request.responseText)},request.onerror=function(){getRequest(IPLocation,"https://geolocation-db.com/json/")},request.open("GET",url,!0),request.send(null)}function showPosition(method){if(currentTime=new Date,null!=method){if($("#locations option[value="+method+"]").prop("selected",!0),16==method)return void $("#locationsIZ").show();urlGetPrayerTimes=17==method?`https://api.aladhan.com/v1/timings/${currentTime.getTime()/1e3}?latitude=${latitude}&longitude=${longitude}&method=99&methodSettings=14.6,null,14.6&midnightMode=1`:`https://api.aladhan.com/v1/timings/${currentTime.getTime()/1e3}?latitude=${latitude}&longitude=${longitude}&method=${method}&midnightMode=1`}else urlGetPrayerTimes=`https://api.aladhan.com/v1/timings/${currentTime.getTime()/1e3}?latitude=${latitude}&longitude=${longitude}&method=2&midnightMode=1`;getRequest(GetCity,urlGetCity=`https://api.bigdatacloud.net/data/reverse-geocode?latitude=${latitude}&longitude=${longitude}&key=${bigDataCloud1}&midnightMode=1`),getRequest(GetPrayerTimes,urlGetPrayerTimes),setTimeout(()=>{$(".loader").remove()},1200)}function GetCity(obj){country=""!=obj.countryName?obj.countryName:"",""!=obj.city?county=obj.city.replace("Metropolitan City of",""):""!=obj.locality&&(county=(county=(county=(county=(county=(county=(county=(county=(county=(county=(county=(county=obj.locality.replace("Municipality","")).replace("municipality","")).replace("of","")).replace("City of","")).replace("Naselje","")).replace("Town of","")).replace("Town","")).replace("City","")).replace("Local community","")).replace("County","")).replace("Village","")).replace("Grad","")),$(".country").html(country),$(".city").html(county)}function GetPrayerTimes(obj){sati=obj.data.timings.Fajr.substring(0,obj.data.timings.Fajr.indexOf(":")),minute=obj.data.timings.Fajr.substring(obj.data.timings.Fajr.indexOf(":")+1),hijriDate=obj.data.date.hijri.day+" "+obj.data.date.hijri.month.en+", "+obj.data.date.hijri.year,gregorianDate=obj.data.date.gregorian.day+" "+obj.data.date.gregorian.month.en+", "+obj.data.date.gregorian.year,month=obj.data.date.gregorian.month.en,timeZone=obj.data.meta.timezone,year=(new Date).getFullYear();var zone,bosnianInstruction="Kliknite na bilo koje mjesto na karti za koje želite vidjeti vrijeme namaza",englishInstruction="Click anywhere on the map where you want to see prayer times";flag=["Europe/Sarajevo","Europe/Zagreb","Europe/Belgrade","Europe/Podgorica","Europe/Skopje"].includes(timeZone),fajr=obj.data.timings.Fajr,sunrise=obj.data.timings.Sunrise,dhuhr=obj.data.timings.Dhuhr,asr=obj.data.timings.Asr,maghrib=obj.data.timings.Maghrib,isha=obj.data.timings.Isha,$(".hijri-date").text(hijriDate),$(".gregorian-date").text(gregorianDate+" / "),$(".fajr-time").text(flag?fajr:formatAMPM(fajr)),$(".sunrise-time").text(flag?sunrise:formatAMPM(sunrise)),$(".dhuhr-time").text(flag?dhuhr:formatAMPM(dhuhr)),$(".asr-time").text(flag?asr:formatAMPM(asr)),$(".maghrib-time").text(flag?maghrib:formatAMPM(maghrib)),$(".isha-time").text(flag?isha:formatAMPM(isha)),$(".midnight-time").text(flag?MidleNightAndlastThirdOrMidnight(2,fajr,maghrib):formatAMPM(MidleNightAndlastThirdOrMidnight(2,fajr,maghrib))),$(".qiyam-time").text(flag?MidleNightAndlastThirdOrMidnight(3,fajr,maghrib):formatAMPM(MidleNightAndlastThirdOrMidnight(3,fajr,maghrib))),$(".fajr-caption").text(flag?"Zora":"Fajr"),$(".sunrise-caption").text(flag?"Izlazak sunca":"Sunrise"),$(".dhuhr-caption").text(flag?"Podne":"Dhuhr"),$(".asr-caption").text(flag?"Ikindija":"Asr"),$(".maghrib-caption").text(flag?"Akšam":"Maghrib"),$(".isha-caption").text(flag?"Jacija":"Isha"),$(".midnight-caption").text(flag?"Polovina noći":"Midnight"),$(".qiyam-caption").text(flag?"Zadnja trećina noći":"Qiyamul-lejl"),$(".instructions").text(flag?bosnianInstruction:englishInstruction),$(".upcoming-prayer").text(flag?"nadolazeći namaz":"upcoming prayer"),$(".mapboxgl-ctrl-geocoder--input").attr("placeholder",flag?"Pretraži mjesta":"Search for places"),$(".autolocation").text(flag?"Lociraj me":"Locate me"),removeActiveClass(),$(".isha").addClass("active"),upcomingPrayer(),$(".fajr").find(".upcoming-prayer").css({visibility:"visible"}),setTimeout(()=>{$(".isha").hasClass("active")?($("#dark_theme").trigger("click"),$(".qiyam").addClass("show"),$(".midnight").addClass("show"),"false"!=isDay&&0!=isDay||"true"!=isDayNightMode&&1!=isDayNightMode||Night(),$(".local-time-wrapper").removeClass("day")):($(".qiyam").removeClass("show"),$(".midnight").removeClass("show"))},1e3),hours=fajr.substring(0,fajr.indexOf(":")),minutes=fajr.substring(fajr.indexOf(":")+1),currentDateTime=new Date((new Date).toLocaleString("en-US",{timeZone:timeZone})),(countDownTime=new Date(currentDateTime)).setHours(hours),countDownTime.setMinutes(minutes),countDownTime.setSeconds(0),urlCalendar=null==method?`https://api.aladhan.com/v1/calendar?latitude=${latitude}&longitude=${longitude}&method=2&month=${currentDateTime.getMonth()+1}&year=${currentDateTime.getFullYear()}&midnightMode=1`:17==method?`https://api.aladhan.com/v1/calendar?latitude=${latitude}&longitude=${longitude}&method=99&methodSettings=14.6,null,14.6&month=${currentDateTime.getMonth()+1}&year=${currentDateTime.getFullYear()}&midnightMode=1`:`https://api.aladhan.com/v1/calendar?latitude=${latitude}&longitude=${longitude}&method=${method}&month=${currentDateTime.getMonth()+1}&year=${currentDateTime.getFullYear()}&midnightMode=1`,16!=method&&getRequest(getCalendar,urlCalendar)}function formatTime(h){return h<10?"0"+h:h}function setHours(h=null){null!=h&&(hours=h.substring(0,h.indexOf(":")),countDownTime.setHours(hours))}function setMinutes(m=null){null!=m&&(minutes=m.substring(m.indexOf(":")+1),countDownTime.setMinutes(minutes))}function removeActiveClass(){$(".fajr").removeClass("active"),$(".sunrise").removeClass("active"),$(".dhuhr").removeClass("active"),$(".asr").removeClass("active"),$(".maghrib").removeClass("active"),$(".isha").removeClass("active")}function setTimes(){currentDateTime>=countDownTime.getTime()&&(setHours(sunrise),setMinutes(sunrise),removeActiveClass(),$(".fajr").addClass("active"),$(".qiyam").removeClass("show"),$(".midnight").removeClass("show")),currentDateTime>=countDownTime.getTime()&&(setHours(dhuhr),setMinutes(dhuhr),removeActiveClass(),$(".sunrise").addClass("active")),currentDateTime>=countDownTime.getTime()&&(setHours(asr),setMinutes(asr),removeActiveClass(),$(".dhuhr").addClass("active")),currentDateTime>=countDownTime.getTime()&&(setHours(maghrib),setMinutes(maghrib),removeActiveClass(),$(".asr").addClass("active")),currentDateTime>=countDownTime.getTime()&&(setHours(isha),setMinutes(isha),removeActiveClass(),$(".maghrib").addClass("active")),currentDateTime>=countDownTime.getTime()&&(removeActiveClass(),$(".isha").addClass("active"),$(".qiyam").addClass("show"),$(".midnight").addClass("show"),countDownTime.setDate(countDownTime.getDate()+1),setHours(fajr),setMinutes(fajr)),upcomingPrayer(),$(".maghrib").hasClass("active")||$(".isha").hasClass("active")||$(".fajr").hasClass("active")?($("#dark_theme").trigger("click"),"true"!=isDayNightMode&&1!=isDayNightMode||Night()):($("#light_theme").trigger("click"),"true"!=isDayNightMode&&1!=isDayNightMode||Day()),ThemeColor(themeColor=localStorage.getItem("themeColor"))}function upcomingPrayer(){$activeTime=$(".active"),removeUpcomingPrayer(),$activeTime.hasClass("fajr")?($(".sunrise").find(".upcoming-prayer").text(flag?"slijedi":"upcoming"),$(".sunrise").find(".upcoming-prayer").css({visibility:"visible"}),$(".local-time-wrapper").removeClass("day")):$activeTime.hasClass("sunrise")?($(".dhuhr").find(".upcoming-prayer").css({visibility:"visible"}),$(".local-time-wrapper").addClass("day")):$activeTime.hasClass("dhuhr")?($(".asr").find(".upcoming-prayer").css({visibility:"visible"}),$(".local-time-wrapper").addClass("day")):$activeTime.hasClass("asr")?($(".maghrib").find(".upcoming-prayer").css({visibility:"visible"}),$(".local-time-wrapper").addClass("day")):$activeTime.hasClass("maghrib")?($(".isha").find(".upcoming-prayer").css({visibility:"visible"}),$(".local-time-wrapper").removeClass("day")):$activeTime.hasClass("isha")&&$(".fajr").find(".upcoming-prayer").css({visibility:"visible"})}function removeUpcomingPrayer(){$(".fajr").find(".upcoming-prayer").css({visibility:"hidden"}),$(".sunrise").find(".upcoming-prayer").css({visibility:"hidden"}),$(".dhuhr").find(".upcoming-prayer").css({visibility:"hidden"}),$(".asr").find(".upcoming-prayer").css({visibility:"hidden"}),$(".maghrib").find(".upcoming-prayer").css({visibility:"hidden"}),$(".isha").find(".upcoming-prayer").css({visibility:"hidden"})}function playAthan(){var number=Math.floor(5*Math.random()+1),athan;new Howl({src:[`./audio/athan${number}.mp3`]}).play()}function playBeep(){var beep;new Howl({src:["./audio/beep.mp3"]}).play()}window.onload=function(){16!=method?(null==latitude||null==longitude?navigator.geolocation.getCurrentPosition(successLocation,errorLocation,{enableHighAccuracy:!0}):(setupMap([longitude,latitude]),showPosition(method)),setTimeout(()=>{setTimeout(()=>{16!=method&&$("#toggle-icon").trigger("click"),setTimeout(()=>{$("#toggle-icon").removeClass("animate")},5e3)},2e3),$("#toggle-icon").addClass("animate")},8e3)):("null"==(cityID=localStorage.getItem("cityID"))?($("#locationsIZ").show(),$("#locationsIZ").addClass("animate")):getRequest(prayerTimesIZ,"https://api.vaktija.ba/vaktija/v1/"+cityID),hideMap(),setTimeout(()=>{$(".loader").remove()},300)),ThemeColor(themeColor=localStorage.getItem("themeColor")),$("html, body").animate({scrollTop:0},1e3),Settings()},$(".autolocation").on("click",(function(){navigator.geolocation.getCurrentPosition(successLocation,errorLocation,{enableHighAccuracy:!0})})),$("#plus").on("click",(function(){var cityID,calendarIZurl;(calendarFlag=!0,tempMonth>=12?(tempYear++,tempMonth=1):tempMonth++,16==method)?getRequest(CalendarRowsIZ,`https://api.vaktija.ba/vaktija/v1/${localStorage.getItem("cityID")}/${tempYear}/${tempMonth}`):urlCalendar=17==method?`https://api.aladhan.com/v1/calendar?latitude=${latitude}&longitude=${longitude}&method=99&methodSettings=14.6,null,14.6&month=${tempMonth}&year=${tempYear}&midnightMode=1`:`https://api.aladhan.com/v1/calendar?latitude=${latitude}&longitude=${longitude}&method=${method}&month=${tempMonth}&year=${tempYear}&midnightMode=1`;getRequest(getCalendar,urlCalendar)})),$("#minus").on("click",(function(){var cityID,calendarIZurl;(calendarFlag=!0,tempMonth<=1?(tempYear--,tempMonth=12):tempMonth--,16==method)?getRequest(CalendarRowsIZ,`https://api.vaktija.ba/vaktija/v1/${localStorage.getItem("cityID")}/${tempYear}/${tempMonth}`):urlCalendar=17==method?`https://api.aladhan.com/v1/calendar?latitude=${latitude}&longitude=${longitude}&method=99&methodSettings=14.6,null,14.6&month=${tempMonth}&year=${tempYear}&midnightMode=1`:`https://api.aladhan.com/v1/calendar?latitude=${latitude}&longitude=${longitude}&method=${method}&month=${tempMonth}&year=${tempYear}&midnightMode=1`;getRequest(getCalendar,urlCalendar)}));var x=setInterval((function(){if(currentDateTimeMiliSeconds>=countDownTimeMiliSeconds&&setTimes(),setTime(currentDateTime=new Date((new Date).toLocaleString("en-US",{timeZone:timeZone}))),null!=countDownTime){var currentDateTimeMiliSeconds=currentDateTime.getTime(),countDownTimeMiliSeconds=countDownTime.getTime();currentDateTimeMiliSeconds>=countDownTimeMiliSeconds&&setTimes();var distance=countDownTimeMiliSeconds-currentDateTimeMiliSeconds,hours=Math.floor(distance%864e5/36e5),minutes=Math.floor(distance%36e5/6e4),seconds=Math.floor(distance%6e4/1e3);1!=isNotificationAllowed&&"true"!=isNotificationAllowed||0==hours&&minutes==notificationMinutes&&0==seconds&&playBeep(),0==hours&&minutes<=9?($(".countdown").addClass("danger"),1!=isAthanAllowed&&"true"!=isAthanAllowed||0!=minutes||0!=seconds||playAthan()):$(".countdown").removeClass("danger"),distance>0&&$(".countdown").html(formatTime(hours)+":"+formatTime(minutes)+":"+formatTime(seconds))}}),1e3);function prayerTimesIZ(obj){var cityID,cityID,calendarIZurl;null!=method&&($("#locations option[value="+method+"]").prop("selected",!0),$("#locationsIZ").show()),null!=(cityID=localStorage.getItem("cityID"))&&($("#locationsIZ option[value="+cityID+"]").prop("selected",!0),$(".location-wrapper").addClass("IZ")),fajr=obj.vakat[0],sunrise=obj.vakat[1],dhuhr=obj.vakat[2],asr=obj.vakat[3],maghrib=obj.vakat[4],isha=obj.vakat[5],$(".hijri-date").text(hijriDate),$(".gregorian-date").text(gregorianDate+" / "),$(".fajr-time").text(fajr),$(".sunrise-time").text(sunrise),$(".dhuhr-time").text(dhuhr),$(".asr-time").text(asr),$(".maghrib-time").text(maghrib),$(".isha-time").text(isha),107==cityID?$(".country").text("Crna Gora"):108==cityID?$(".country").text("Crna Gora"):109==cityID?$(".country").text("Srbija"):110==cityID?$(".country").text("Srbija"):111==cityID?$(".country").text("Crna Gora"):112==cityID?$(".country").text("Crna Gora"):113==cityID?$(".country").text("Srbija"):114==cityID?$(".country").text("Srbija"):115==cityID?$(".country").text("Crna Gora"):116==cityID?$(".country").text("Srbija"):117==cityID?$(".country").text("Srbija"):$(".country").text("Bosna i Hercegovina"),$(".city").text(obj.lokacija),$(".gregorian-date").text(obj.datum[1]+" / "),$(".hijri-date").text(obj.datum[0]),$(".upcoming-prayer").text("nadolazeći namaz"),removeActiveClass(),$(".isha").addClass("active"),upcomingPrayer(),$(".fajr").find(".upcoming-prayer").css({visibility:"visible"}),setTimeout(()=>{$(".isha").hasClass("active")&&($("#dark_theme").trigger("click"),"true"!=isDayNightMode&&1!=isDayNightMode||Night(),$(".local-time-wrapper").removeClass("day"))},1e3),hours=fajr.substring(0,fajr.indexOf(":")),minutes=fajr.substring(fajr.indexOf(":")+1),currentDateTime=new Date((new Date).toLocaleString("en-US",{timeZone:timeZone})),(countDownTime=new Date(currentDateTime)).setHours(hours),countDownTime.setMinutes(minutes),countDownTime.setSeconds(0),getRequest(CalendarRowsIZ,`https://api.vaktija.ba/vaktija/v1/${cityID=localStorage.getItem("cityID")}/${(new Date).getFullYear()}/${(new Date).getMonth()+1}`)}function CalendarRowsIZ(obj){$("#table tbody").html(""),$(".calendar-caption").html("Islamska Zajednica, "+monthNamesBosnian[obj.mjesec]+" "+obj.godina+"."),$(".calendar").removeClass("hide");for(var i=0;i<obj.dan.length;i++)$("#table tbody").append(`<tr>\n    <td class="calendar-date" data-day="${(i<9?"0"+(i+1):i+1)+""+tempMonth}">${formatTime(i+1)+". "+monthNamesBosnian[obj.mjesec].toLocaleLowerCase().substring(0,3)}</td>\n    <td>${obj.dan[i].vakat[0]}</td>\n    <td>${obj.dan[i].vakat[1]}</td>\n    <td>${obj.dan[i].vakat[2]}</td>\n    <td>${obj.dan[i].vakat[3]}</td>\n    <td>${obj.dan[i].vakat[4]}</td>\n    <td>${obj.dan[i].vakat[5]}</td>\n    <td>${MidleNightAndlastThirdOrMidnight(2,obj.dan[i].vakat[0],obj.dan[i].vakat[4])}</td>\n    <td>${MidleNightAndlastThirdOrMidnight(3,obj.dan[i].vakat[0],obj.dan[i].vakat[4])}</td>\n    </tr>`);$(`td[data-day="${dayofMonth(new Date)+((new Date).getMonth()+1)}"]`).parent().addClass("active")}function hideMap(){$("#map").slideUp(),$(".instructions ").slideUp(),$(".autolocation").slideUp(),$("#toggle-icon").slideUp(),$(".calendar").addClass("hide"),$(".calculation-methods").addClass("toggle")}function showMap(){$("#map").slideDown(),$(".instructions ").slideDown(),$(".autolocation").slideDown(),$("#toggle-icon").slideDown(),$(".calendar").removeClass("hide"),$(".calculation-methods").removeClass("toggle")}function formatAMPM(time){var hours,minutes,ampm=(hours=parseInt(time.substring(0,time.indexOf(":"))))>=12?"PM":"AM",strTime;return(hours=(hours%=12)||12)+":"+(minutes=(minutes=parseInt(time.substring(time.indexOf(":")+1)))<10?"0"+minutes:minutes)+" "+ampm}function dayofMonth(d){return(d.getDate()<10?"0":"")+d.getDate()}function getCalendar(obj){$("#table tbody").html("");for(var i=0;i<obj.data.length;i++)$("#table tbody").append(Rows(obj.data[i]));$(".date-caption").text(flag?"Datum":"Date"),$(`td[data-day="${dayofMonth(new Date)+((new Date).getMonth()+1)}"]`).parent().addClass("active"),calendarFlag?$(".calendar-caption").text(flag?monthNamesBosnian[tempMonth]+" "+tempYear:monthNames[tempMonth]+" "+tempYear):$(".calendar-caption").text(flag?getBosnianMonths(month)+" "+tempYear:month+" "+tempYear),$(".calendar").removeClass("hide")}function Rows(obj){var fajrTiming=obj.timings.Fajr.substring(0,obj.timings.Fajr.indexOf(" ")),maghribTiming=obj.timings.Maghrib.substring(0,obj.timings.Maghrib.indexOf(" "));return`<tr>\n      <td class="calendar-date" data-day="${obj.date.gregorian.day+tempMonth}">${obj.date.gregorian.day}. ${flag?getBosnianDays(obj.date.gregorian.weekday.en):getEnglishDays(obj.date.gregorian.weekday.en)}</td>\n      <td>${fajrTiming}</td>\n      <td>${obj.timings.Sunrise.substring(0,obj.timings.Sunrise.indexOf(" "))}</td>\n      <td>${obj.timings.Dhuhr.substring(0,obj.timings.Dhuhr.indexOf(" "))}</td>\n      <td>${obj.timings.Asr.substring(0,obj.timings.Asr.indexOf(" "))}</td>\n      <td>${maghribTiming}</td>\n      <td>${obj.timings.Isha.substring(0,obj.timings.Isha.indexOf(" "))}</td>\n      <td>${MidleNightAndlastThirdOrMidnight(2,fajrTiming,maghribTiming)}</td>\n      <td>${MidleNightAndlastThirdOrMidnight(3,fajrTiming,maghribTiming)}</td>\n  </tr>`}function MidleNightAndlastThirdOrMidnight(Number,Fajr,Magrib){var magribTime=new Date,magribHours=Magrib.substring(0,Magrib.indexOf(":")),magribminutes=Magrib.substring(Magrib.indexOf(":")+1);magribTime.setHours(magribHours),magribTime.setMinutes(magribminutes),magribTime.setSeconds(0);var fajrTime=new Date;fajrTime.setDate(fajrTime.getDate()+1);var fajrhours=Fajr.substring(0,Fajr.indexOf(":")),fajrminutes=Fajr.substring(Fajr.indexOf(":")+1);fajrTime.setHours(fajrhours),fajrTime.setMinutes(fajrminutes),fajrTime.setSeconds(0);var diferenceMiliseconds,Miliseconds=(fajrTime-magribTime)/Number,hours=Math.floor(Miliseconds%864e5/36e5),minutes=Math.floor(Miliseconds%36e5/6e4),seconds=Math.floor(Miliseconds%6e4/1e3),lastThirdOrMidnight=new Date(fajrTime);lastThirdOrMidnight.setHours(fajrTime.getHours()-hours),lastThirdOrMidnight.setMinutes(fajrTime.getMinutes()-minutes),lastThirdOrMidnight.setSeconds(fajrTime.getSeconds()-seconds);var lastThirdOrMidnightHours=lastThirdOrMidnight.getHours(),lastThirdOrMidnightMinutes=lastThirdOrMidnight.getMinutes();return formatTime(lastThirdOrMidnightHours)+":"+formatTime(lastThirdOrMidnightMinutes)}function getBosnianDays(day){return"Monday"==day?"pon":"Tuesday"==day?"uto":"Wednesday"==day?"sri":"Thursday"==day?"čet":"Friday"==day?"pet":"Saturday"==day?"sub":"Sunday"==day?"ned":void 0}function getEnglishDays(day){return"Monday"==day?"mon":"Tuesday"==day?"tue":"Wednesday"==day?"wed":"Thursday"==day?"thu":"Friday"==day?"fri":"Saturday"==day?"sat":"Sunday"==day?"sun":void 0}function getBosnianMonths(month){return"January"==month?"Januar":"February"==month?"Februar":"March"==month?"Mart":"April"==month?"April":"May"==month?"Maj":"June"==month?"Juni":"July"==month?"Juli":"August"==month?"August":"September"==month?"Septembar":"October"==month?"Oktobar":"November"==month?"Novembar":"December"==month?"Decembar":void 0}$("#locations").change((function(){if(method=$(this).val(),localStorage.setItem("method",method),currentTime=new Date,16==method){hideMap(),$("#locationsIZ").show(),localStorage.setItem("IZ",!0);var cityID=localStorage.getItem("cityID");null==cityID?($(".fajr-time").html('<img src="https://i.stack.imgur.com/qq8AE.gif" width="35" height="35">'),$(".sunrise-time").html('<img src="https://i.stack.imgur.com/qq8AE.gif" width="35" height="35">'),$(".dhuhr-time").html('<img src="https://i.stack.imgur.com/qq8AE.gif" width="35" height="35">'),$(".asr-time").html('<img src="https://i.stack.imgur.com/qq8AE.gif" width="35" height="35">'),$(".maghrib-time").html('<img src="https://i.stack.imgur.com/qq8AE.gif" width="35" height="35">'),$(".isha-time").html('<img src="https://i.stack.imgur.com/qq8AE.gif" width="35" height="35">'),$(".countdown").html('<img src="https://i.stack.imgur.com/qq8AE.gif" width="35" height="35">'),$(".city").html('<img src="https://i.stack.imgur.com/qq8AE.gif" width="35" height="35">'),$(".calendar").addClass("hide"),$(".card").removeClass("active"),$(".upcoming-prayer").html(""),$(".country").html(""),$(".countdown").hide(),$("#locationsIZ").addClass("animate"),$(".location-wrapper").removeClass("IZ")):(location.reload(),getRequest(prayerTimesIZ,"https://api.vaktija.ba/vaktija/v1/"+cityID))}else{$("#locationsIZ").hide(),$(".location-wrapper").removeClass("IZ");var isIZ=localStorage.getItem("IZ");$("#locationsIZ option[value=-1]").prop("selected",!0),"true"==isIZ&&(showMap(),setTimeout(()=>{setupMap([longitude,latitude]),$("html, body").animate({scrollTop:scrollTo},100)},500),localStorage.setItem("IZ",!1))}urlGetPrayerTimes=17==method?`https://api.aladhan.com/v1/timings/${currentTime.getTime()/1e3}?latitude=${latitude}&longitude=${longitude}&method=99&methodSettings=14.6,null,14.6&midnightMode=1`:`https://api.aladhan.com/v1/timings/${currentTime.getTime()/1e3}?latitude=${latitude}&longitude=${longitude}&method=${method}&midnightMode=1`,showPosition(method),setupMap([longitude,latitude])})),$("#locationsIZ").click((function(){$("#locationsIZ").removeClass("animate")})),$("#locationsIZ").change((function(){cityID=$(this).val(),localStorage.setItem("cityID",cityID),$(".countdown").show(),getRequest(prayerTimesIZ,"https://api.vaktija.ba/vaktija/v1/"+cityID)})),$("#toggle-icon").click((function(){var isMobile=window.matchMedia("(max-width: 768px)");$("#map").slideToggle(),$(".prayer-times-wrapper").css({"z-index":"9999"}),$(".autolocation").toggle("slow"),$(".local-time-wrapper").toggleClass("toggle"),$(".calculation-methods").toggleClass("toggle"),$(".instructions").toggle(500),isMobile.matches&&($(".local-time-wrapper.mobile").toggle(300),$(this).toggleClass("toggle"),$(".dark-light-mode").toggleClass("toggle"),$("#settings-icon").toggleClass("top-0"),$(window).scroll((function(){var aTop=$(".cards-wrapper").offset().top;console.log($(this).scrollTop(),aTop),$(this).scrollTop()>=aTop?$("#settings-icon").hide():$("#settings-icon").show()}))),window.matchMedia("(max-width: 900px)").matches&&setTimeout(()=>{$(".instructions").remove()},8e3)})),$(".print").on("click",(function(){window.print()}));const hourEl=$(".hour"),minuteEl=$(".minute"),secondEl=$(".second"),timeEl=$(".time"),dateEl=$(".date"),days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],bosnianDays=["Nedjelja","Ponedjeljak","Utorak","Srijeda","Četvrtak","Petak","Subota"],months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function setTime(time=null){if(null!=time){const month=time.getMonth(),day=time.getDay(),date=time.getDate(),hours=time.getHours(),hoursForClock=hours>=13?hours%12:hours,minutes=time.getMinutes(),seconds=time.getSeconds(),ampm=hours>=12?"PM":"AM";0==hours&&0==minutes&&0==seconds&&location.reload(),hourEl.css("transform",`translate(-50%, -100%) rotate(${scale(hoursForClock,0,11,0,360)}deg)`),minuteEl.css("transform",`translate(-50%, -100%) rotate(${scale(minutes,0,59,0,360)}deg)`),secondEl.css("transform",`translate(-50%, -100%) rotate(${scale(seconds,0,59,0,360)}deg)`),flag?(timeEl.html(`${hours}:${minutes<10?`0${minutes}`:minutes}`),dateEl.html(`${bosnianDays[day]}, ${months[month]} <span class="circle">${date}</span>`)):(timeEl.html(`${hoursForClock}:${minutes<10?`0${minutes}`:minutes} ${ampm}`),dateEl.html(`${days[day]}, ${months[month]} <span class="circle">${date}</span>`))}}const scale=(num,in_min,in_max,out_min,out_max)=>(num-in_min)*(out_max-out_min)/(in_max-in_min)+out_min;function ThemeColor(color=null){isDay=localStorage.getItem("isDay"),isDayNightMode=localStorage.getItem("isDayNightMode"),null==color||"false"!=isDayNightMode&&0!=isDayNightMode?null!=isDay&&("true"==isDay||1==isDay?($("#light_theme").trigger("click"),"true"!=isDayNightMode&&1!=isDayNightMode||Day()):($("#dark_theme").trigger("click"),"true"!=isDayNightMode&&1!=isDayNightMode||Night())):($(`.theme-color span[data-color='${color}']`).addClass("active"),$(".main-section").css("background-image",`-webkit-gradient(linear,left top,left bottom,from(${color})),url(../images/6.png)`),$("#table tr.active").removeClass("gray"),"#42a76638"==color?($(".form-control").css("background","#0e313fd4"),$("#table").css("background","#0e313fd4"),$("meta[name='theme-color']").attr("content","#104755")):($(".form-control").css("background",color),$("#table").css("background",convertHex(color,.1)),$("meta[name='theme-color']").attr("content",color)),"#0606068c"==color?($("meta[name='theme-color']").attr("content","#030c1d"),$(".form-control").css("background","#030c1d")):"#10475570"==color?($("meta[name='theme-color']").attr("content","#072b45"),$(".form-control").css("background","#072b45")):"#42a76638"==color?($("meta[name='theme-color']").attr("content","#0e3443"),$(".form-control").css("background","#0e3443")):"#1e2227"==color&&($("#table tr.active").addClass("gray"),$(".form-control").css("background","#1e2227")))}function convertHex(hex,opacity){return hex=hex.replace("#",""),r=parseInt(hex.substring(0,2),16),g=parseInt(hex.substring(2,4),16),b=parseInt(hex.substring(4,6),16),result="rgba("+r+","+g+","+b+","+opacity+")",result}function Night(){localStorage.setItem("isDay",!1),$(".local-time-wrapper").removeClass("day"),$("#table").css({backgroundColor:"#040d1d"}),$(".main-section").addClass("dark"),$(".form-control").removeClass("light"),$("meta[name='theme-color']").attr("content","#030c1d"),$("body").css({background:"#030c1d"}),$("#dark_theme").hide(),$("#light_theme").show(),$("#darkMode").addClass("active")}function Day(){localStorage.setItem("isDay",!0),$(".local-time-wrapper").addClass("day"),$("#table").css({backgroundColor:"#0e313fd4"}),$(".main-section").removeClass("dark"),$(".form-control").addClass("light"),$("meta[name='theme-color']").attr("content","#0e3443"),$("body").css({background:"#0e3443"}),$("#dark_theme").show(),$("#light_theme").hide(),$("#darkMode").removeClass("active")}$(".local-time-mobile").click((function(){var buttonText=$(this).html();$(this).html("Show local time"==buttonText?"Hide local time":"Show local time"),$(".clock-container.mobile").slideToggle()})),$("#close-settings-icon").click((function(){$(".settings-wrapper").animate({width:"toggle"},350)})),$("#settings-icon").click((function(){$(".settings-wrapper").animate({width:"toggle"},350)})),$(".main-section").click((function(){$(".settings-wrapper").slideUp()})),$(".cb-value").click((function(){var mainParent=$(this).parent(".toggle-btn"),isNotification=$(this).attr("data-notification"),isDayNightMode=$(this).attr("data-dayNightMode");$(mainParent).hasClass("active")?($(mainParent).removeClass("active"),isNotification?($(".range-slider").slideUp(),localStorage.setItem("isNotificationAllowed",!1),isNotificationAllowed=!1):isDayNightMode?($(".theme-color-wrapper").slideDown(),localStorage.setItem("isDayNightMode",!1),isDayNightMode=!1):(localStorage.setItem("isAthanAllowed",!1),isAthanAllowed=!1)):($(mainParent).addClass("active"),isNotification?($(".range-slider").slideDown(),localStorage.setItem("isNotificationAllowed",!0),isNotificationAllowed=!0):isDayNightMode?($(".theme-color-wrapper").slideUp(),localStorage.setItem("isDayNightMode",!0),isDayNightMode=!0,localStorage.setItem("themeColor",null),$(".main-section").attr("style",""),$(".theme-color span").removeClass("active"),$(".form-control").css("background",""),ThemeColor(),isDayNightMode=!0):(localStorage.setItem("isAthanAllowed",!0),isAthanAllowed=!0))})),$(document).on("input",'input[type="range"]',(function(e){var minutes=e.currentTarget.value;$(".range-slider output").html(minutes),notificationMinutes=minutes,localStorage.setItem("notificationMinutes",minutes)})),$(".theme-color span").click((function(){var color=$(this).attr("data-color");localStorage.setItem("themeColor",color),$(".theme-color span").removeClass("active"),$(this).addClass("active"),ThemeColor(color)}));var noSleep=new NoSleep;function enableNoSleep(){noSleep.enable(),document.removeEventListener("touchstart",enableNoSleep,!1)}document.addEventListener("touchstart",enableNoSleep,!1),enableNoSleep(),"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("./serviceWorker.js").then(res=>console.log("service worker registered")).catch(err=>console.log("service worker not registered",err))})),$(".mapboxgl-ctrl-geocoder").on("propertychange input",(function(){$(".mapboxgl-ctrl-geocoder").css("width","100%")}));